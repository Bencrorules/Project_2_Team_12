<script>
function grid(size)
{
    let arr = [];
    for(let i=0;i<size;i+=1)
    {
        arr[i] = [];
        for(let j=0;j<size;j+=1)
        {
           arr[i][j] = "*";
        }
    }
    return arr;
}
function boardUpdate(row,column, fGrid, eGrid)
{
    if(eGrid[row][column] == 'S')
    {
        eGrid[row][column] = 'H';
        fGrid[row][column] = 'H';
        console.log("Hit\n");
    }
    else
    {
        eGrid[row][column] = 'M';
        fGrid[row][column] = 'M';
        console.log("Miss\n");
    }
}
function shipPicker()
{
    let ship = prompt("Pick a ship: 1,2,3,4, or 5");
    return ship;
}
function getStartRow()
{
    let startRow = prompt("Pick a starting row");
    return startRow;
}
function getEndRow()
{
    let endRow = prompt("Pick a valid ending row");
    return endRow;
}
function getStartColumn()
{
    let startColumn =  prompt("Pick a starting column");
    return startColumn;
}
function getEndColumn()
{
    let endColumn =  prompt("Pick a valid ending column");
    return endColumn;
}
function validPlacement(srow,scolumn,erow,ecolumn,ship) //is a valid placement
{
    if(srow == erow)
    {
        if((scolumn+(ship-1))==ecolumn || (scolumn-(ship-1))==ecolumn)
        {
            return true;
        }
    }
    else if(scolumn == ecolumn)
    {
        if((srow+(ship-1))==erow || (srow-(ship-1))==erow)
        {
            return true;
        }
    }
    else
    {
        return false;
    }
}
function sameRow(srow,erow)
{
    if(srow == erow)
    {
        return true;
    }
    return false;
}
function sameColumn(scolumn,ecolumn)
{
    if(scolumn == ecolumn)
    {
        return true;
    }
    return false;
}
/*function shipPlacer(gridPlacer) //individual ship placer
{
    let ship = shipPicker();
    if(ship == 1)
    {
        let row = prompt("Pick a row");
        let column = prompt("Pick a column");
        gridPlacer[row][column] = "S";
    }
    else
    {
        let srow = getStartRow();
        let scolumn = getStartColumn();
        let erow = getEndRow();
        let ecolumn = getEndColumn();
        if(validPlacement(srow,scolumn,erow,ecolumn,ship))
        {
            if(sameRow(srow,erow))
            {
                if(scolumn<ecolumn)
                {
                    while(count<ship)
                    {
                        gridPlacer[srow][scolumn] = "S";
                        count++;
                        scolumn++;
                    }
                }
                else
                {
                    while(count<ship)
                    {
                        gridPlacer[srow][scolumn] = "S";
                        count++;
                        scolumn--;
                    }
                }
            }
            else
            {
                if(srow<erow)
                {
                    while(count<ship)
                    {
                        gridPlacer[srow][scolumn] = "S";
                        count++;
                        srow++;
                    }
                }
                else
                {
                    while(count<ship)
                    {
                        gridPlacer[srow][scolumn] = "S";
                        count++;
                        srow--;
                    }
                }
            }
        }
    }
}
*/
function battleship() //battleship game
{
    let enemyGuessingGrid = grid(10);
    let friendlyGuessingGrid = grid(10);
    let friendlyGrid = grid(10);
    let enemyGrid = grid(10);
    let enemyCount = 0;
    let friendlyCount = 0;
    let turn = 1;
    let row = 0;
    let column = 0;
    enemyGrid[1][1] = 'S';
    /*for(let i=0;i<5;i++)
    {
        shipPlacer(friendlyGrid);
    }
    for(let i=0;i<5;i++)
    {
        shipPlacer(enemyGrid);
    }
    */
   function printBoards(arr)
   {
        for(let i=0;i<10;i++)
        {
            let rowPrint = '';
            for(let j=0;j<10;j++)
            {
                rowPrint = rowPrint+arr[i][j];
            }
            console.log(rowPrint);
        }
   }
    function winner()
    {
        if(enemyCount==15 || friendlyCount==15)
        {
            return true;
        }
        return false;
    }
    while(!winner())
    {
        if(turn == 1)
        {
            console.log("My ship Placement:");
            printBoards(friendlyGrid);
            console.log("My guessing Board:");
            printBoards(friendlyGuessingGrid);
            do
            {
                row = rowGuess();
                column = columnGuess();
            }while(validGuess(row,column,enemyGrid));
            if(rightGuess(row,column,enemyGrid))
            {
                friendlyCount++;
            }
            boardUpdate(row,column,friendlyGuessingGrid,enemyGrid)
            console.log("Turn swap");
            turn = 2;
        }
        if(turn == 2)
        {
            console.log("My ship Placement:");
            printBoards(enemyGrid);
            console.log("My guessing Board:");
            printBoards(enemyGuessingGrid);
            do
            {
                row = rowGuess();
                column = columnGuess();
            }while(validGuess(row,column,friendlyGrid));
            if(rightGuess(row,column,friendlyGrid))
            {
                enemyCount++;
            }
            boardUpdate(row,column,enemyGuessingGrid,friendlyGrid)
            console.log("Turn swap");
            turn = 1;
        }
    }
    console.log("You won!!!");
}
function rowGuess()
{
    let rowGuess = prompt("Guess a row");
    return rowGuess;
}
function columnGuess()
{
    let columnGuess = prompt("Guess a column");
    return columnGuess;
}
function rightGuess(row,column, arr)
{
    if(arr[row][column] == 'S')
    {
        return true;
    }
    return false;
}
function validGuess(row,column,arr)
{
    if(arr[row][column] == 'M' || arr[row][column] == 'H')
    {
        return true;
    }
    return false;
}
battleship();
</script>